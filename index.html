<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Bani Nur</title>

  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />

  <!-- Select2 CSS -->
  <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />

  <!-- DataTables CSS -->
  <link href="https://cdn.datatables.net/1.13.4/css/jquery.dataTables.min.css" rel="stylesheet" />

  <!-- FontAwesome -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet" />
</head>

<body>
  <div class="container mt-3">
    <div class="row">
      <div class="col-12 text-center">
        <h5>Keturunan dari<br />Mbah H. Nur & Mbah Genuk</h5>
      </div>
    </div>
    <hr />

    <div class="row">
      <div class="col-12" id="table-anak">
        <table class="table table-bordered">
          <thead style="text-align: center">
            <th>No</th>
            <th>Anak</th>
            <th>Pasangan</th>
            <th>Info</th>
          </thead>
          <tbody id="data-table-anak">
            <!-- Rows will be dynamically inserted here -->
          </tbody>
        </table>
      </div>
    </div>

    <div class="row">
      <div class="col-12" id="table-judul-anak" style="display: none;">
        <table class="table table-bordered">
          <thead style="text-align: center;">
            <th>Pasangan Anak</th>
            <th>Kembali</th>
          </thead>
          <tbody>
            <tr>
              <td>
                <span id="value-judul-anak"></span>
                &
                <span id="value-judul-pasangan-anak"></span>
              </td>
              <td style="text-align: center;">
                <button class="btn btn-danger btn-sm" onclick="backtableanak()"><i
                    class="fa-solid fa-circle-up"></i></button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>

    <div class="row">
      <div class="col-12" id="table-putu" style="display: none;">
        <table class="table table-bordered">
          <thead style="text-align: center;">
            <th>No</th>
            <th>Nama</th>
            <th>Pasangan</th>
            <th>Info</th>
          </thead>
          <tbody id="data-table-putu">

          </tbody>
        </table>
      </div>
    </div>

    <!-- Modal -->
    <div class="modal fade" id="modal-anak" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
      <div class="modal-dialog ">
        <div class="modal-content">
          <div class="modal-header">
            <h1 class="modal-title fs-5">Info - <span id="judul-anak"></span></h1>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body">
            <div class="row">
              <div class="col-12">
                <table>
                  <tr>
                    <td>Nama Lengkap</td>
                    <td>:</td>
                    <th id="fullname"></th>
                  </tr>
                  <tr>
                    <td>Nama Panggilan</td>
                    <td>:</td>
                    <th id="nickname"></th>
                  </tr>
                  <tr>
                    <td>Bapak</td>
                    <td>:</td>
                    <th id="father"></th>
                  </tr>
                  <tr>
                    <td>Ibu</td>
                    <td>:</td>
                    <th id="mother"></th>
                  </tr>
                  <tr>
                    <td>Anak ke</td>
                    <td>:</td>
                    <th id="seq"></th>
                  </tr>
                  <tr>
                    <td>Jenis kelamin</td>
                    <td>:</td>
                    <th id="gender"></th>
                  </tr>
                  <tr>
                    <td>Tahun lahir</td>
                    <td>:</td>
                    <th id="born"></th>
                  </tr>
                  <tr>
                    <td>Tahun wafat</td>
                    <td>:</td>
                    <th id="dead"></th>
                  </tr>
                  <tr>
                    <td colspan="3" style="height: 30px;"> </td>
                  </tr>
                  <tr>
                    <td>Pasangan</td>
                    <td>:</td>
                    <th id="partner"></th>
                  </tr>
                  <tr>
                    <td>Tahun lahir</td>
                    <td>:</td>
                    <th id="partnerborn"></th>
                  </tr>
                  <tr>
                    <td>Tahun wafat</td>
                    <td>:</td>
                    <th id="partnerdead"></th>
                  </tr>
                  <tr>
                    <td>Jumlah anak</td>
                    <td>:</td>
                    <td id="child"></td>
                  </tr>
                </table>
              </div>
            </div>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
              Close
            </button>

          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- jQuery -->
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

  <!-- Select2 JS -->
  <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>

  <!-- DataTables JS -->
  <script src="https://cdn.datatables.net/1.13.4/js/jquery.dataTables.min.js"></script>

  <!-- SweetAlert2 JS -->
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

  <!-- FontAwesome (already loaded via the CSS link) -->

  <script>
    const anakData = [
      { id: 1, fullname: 'Moh. Romli', nickname: 'Romli', father: 'H. Nur', mother: 'Genuk', seq: 1, gender: 'Laki-laki', born: '1928', dead: '-', partner: '-', partnerborn: '-', partnerdead: '-', child: '-' },
      { id: 2, fullname: 'Siti Aminah', nickname: 'Ti', father: 'H. Nur', mother: 'Genuk', seq: 2, gender: 'Perempuan', born: '1931', dead: '-', partner: 'Moh. Kusnun', partnerborn: '1924', partnerdead: '-', child: '8' },
      { id: 3, fullname: 'Kholiyah', nickname: 'Yah', father: 'H. Nur', mother: 'Genuk', seq: 3, gender: 'Perempuan', born: '1934', dead: '-', partner: 'Abd. Mu`thi', partnerborn: '1925', partnerdead: '-', child: '3' },
      { id: 4, fullname: 'Marsinah', nickname: 'Mar', father: 'H. Nur', mother: 'Genuk', seq: 4, gender: 'Perempuan', born: '1937', dead: '-', partner: 'Abd. Shomad', partnerborn: '1927', partnerdead: '-', child: '8' },
      { id: 5, fullname: 'Marzuqi', nickname: '-', father: 'H. Nur', mother: 'Genuk', seq: 5, gender: 'Laki-Laki', born: '1940', dead: '1940', partner: '-', partnerborn: '-', partnerdead: '-', child: '-' },
      { id: 6, fullname: 'Siti Khotijah', nickname: 'Is', father: 'H. Nur', mother: 'Genuk', seq: 6, gender: 'Perempuan', born: '1944', dead: '-', partner: 'Mas`ud Sufyan', partnerborn: '1929', partnerdead: '-', child: '2' },
      { id: 7, fullname: 'M. Syahri', nickname: 'Ri', father: 'H. Nur', mother: 'Genuk', seq: 7, gender: 'Laki-laki', born: '1945', dead: '-', partner: 'Siti Syamsiyah', partnerborn: '1955', partnerdead: '-', child: '3' },
      { id: 8, fullname: 'M. Bashoni', nickname: 'Bas', father: 'H. Nur', mother: 'Genuk', seq: 8, gender: 'Laki-laki', born: '1949', dead: '-', partner: 'Umi Maisaroh', partnerborn: '1959', partnerdead: '-', child: '6' }
    ];

    const putuData = [
      { id: 1, rootanak: 2, fullname: 'Siti Sapurah', nickname: 'Sapur', father: 'Moh. Kusnun', mother: 'Siti Aminah', seq: 1, gender: 'Perempuan', born: '1951', dead: '-', partner: 'Muh Yadi', partnerborn: '1946', partnerdead: '-', child: '3' },
      { id: 2, rootanak: 2, fullname: 'Samuji', nickname: 'Samuji', father: 'Moh. Kusnun', mother: 'Siti Aminah', seq: 2, gender: 'Laki-laki', born: '1954', dead: '-', partner: 'Umi Aiman', partnerborn: '1960', partnerdead: '-', child: '3' },
      { id: 3, rootanak: 2, fullname: 'Imam Safi`i', nickname: '-', father: 'Moh. Kusnun', mother: 'Siti Aminah', seq: 3, gender: 'Laki-laki', born: '1956', dead: '1957', partner: '-', partnerborn: '-', partnerdead: '-', child: '-' },
      { id: 4, rootanak: 2, fullname: 'Shodiqun', nickname: 'Shodiqun', father: 'Moh. Kusnun', mother: 'Siti Aminah', seq: 4, gender: 'Laki-laki', born: '1958', dead: '-', partner: 'Siti Nurjannah', partnerborn: '1962', partnerdead: '-', child: '2' },
      { id: 5, rootanak: 2, fullname: 'Moh. Makin', nickname: 'Makin', father: 'Moh. Kusnun', mother: 'Siti Aminah', seq: 5, gender: 'Laki-laki', born: '1960', dead: '-', partner: 'Masfufah', partnerborn: '1971', partnerdead: '-', child: '3' },
      { id: 6, rootanak: 2, fullname: 'M. Salam', nickname: 'Salam', father: 'Moh. Kusnun', mother: 'Siti Aminah', seq: 6, gender: 'Laki-laki', born: '1963', dead: '-', partner: 'Ngatun', partnerborn: '1970', partnerdead: '-', child: '-' },
      { id: 7, rootanak: 2, fullname: 'Islamudin', nickname: 'Islamudin', father: 'Moh. Kusnun', mother: 'Siti Aminah', seq: 7, gender: 'Laki-laki', born: '1965', dead: '-', partner: 'Sriyani', partnerborn: '1968', partnerdead: '-', child: '2' },
      { id: 8, rootanak: 2, fullname: 'Ihsanuddin', nickname: 'Ihsan', father: 'Moh. Kusnun', mother: 'Siti Aminah', seq: 8, gender: 'Laki-laki', born: '1974', dead: '-', partner: 'Rina Rahmawati', partnerborn: '1978', partnerdead: '-', child: '2' },
      { id: 9, rootanak: 3, fullname: 'Syahrowardi', nickname: 'Syahro', father: 'Abd. Mu`thi', mother: 'Kholiyah', seq: 1, gender: 'Laki-laki', born: '1964', dead: '-', partner: 'Ulik Anuroh', partnerborn: '-', partnerdead: '-', child: '1' },
      { id: 10, rootanak: 3, fullname: 'Badi`ah', nickname: 'Badi`', father: 'Abd. Mu`thi', mother: 'Kholiyah', seq: 2, gender: 'Perempuan', born: '1971', dead: '-', partner: 'Masrukin', partnerborn: '-', partnerdead: '-', child: '4' },
      { id: 11, rootanak: 3, fullname: 'Zarnuji', nickname: 'Jar', father: 'Abd. Mu`thi', mother: 'Kholiyah', seq: 3, gender: 'Laki-laki', born: '1974', dead: '-', partner: '-', partnerborn: '-', partnerdead: '-', child: '-' },
      { id: 12, rootanak: 4, fullname: 'Moh. Arif', nickname: 'Moh/Arif', father: 'Abd. Shomad', mother: 'Marsinah', seq: 1, gender: 'Laki-laki', born: '1958', dead: '-', partner: 'Qodriyah', partnerborn: '1966', partnerdead: '-', child: '3' },
      { id: 13, rootanak: 4, fullname: 'Moh. Zamzuri', nickname: 'Zuri', father: 'Abd. Shomad', mother: 'Marsinah', seq: 2, gender: 'Laki-laki', born: '1960', dead: '-', partner: 'Muthi`atul', partnerborn: '1964', partnerdead: '-', child: '3' },
      { id: 14, rootanak: 4, fullname: 'Umi Hanik', nickname: 'Nik', father: 'Abd. Shomad', mother: 'Marsinah', seq: 3, gender: 'Perempuan', born: '1963', dead: '-', partner: 'Moh. Munir', partnerborn: '1955', partnerdead: '-', child: '2' },
      { id: 15, rootanak: 4, fullname: 'Sholihatin', nickname: 'Kah', father: 'Abd. Shomad', mother: 'Marsinah', seq: 4, gender: 'Perempuan', born: '1965', dead: '-', partner: 'Moh. Shofwan', partnerborn: '1965', partnerdead: '-', child: '3' },
      { id: 16, rootanak: 4, fullname: 'Moh. Tamyiz', nickname: 'Tamyiz', father: 'Abd. Shomad', mother: 'Marsinah', seq: 5, gender: 'Laki-laki', born: '1968', dead: '-', partner: 'Siti Umi Rohmah', partnerborn: '1974', partnerdead: '-', child: '2' },
      { id: 17, rootanak: 4, fullname: 'Maskub', nickname: 'Maskub', father: 'Abd. Shomad', mother: 'Marsinah', seq: 6, gender: 'Laki-laki', born: '1968', dead: '-', partner: 'Latifatul Mukhoyyaroh', partnerborn: '1975', partnerdead: '-', child: '3' },
      { id: 18, rootanak: 4, fullname: 'Indasah', nickname: 'In', father: 'Abd. Shomad', mother: 'Marsinah', seq: 7, gender: 'Perempuan', born: '1973', dead: '-', partner: 'Imam Mutamim', partnerborn: '1962', partnerdead: '-', child: '2' },
      { id: 19, rootanak: 4, fullname: 'Isnaniyah', nickname: 'Is', father: 'Abd. Shomad', mother: 'Marsinah', seq: 8, gender: 'Perempuan', born: '1975', dead: '-', partner: 'Moh. Ridwan', partnerborn: '1970', partnerdead: '-', child: '2' },
      { id: 20, rootanak: 6, fullname: 'Husnul Hayati', nickname: '-', father: 'Mas`ud Sufyan', mother: 'Siti Khotijah', seq: 1, gender: 'Perempuan', born: '1959', dead: '-', partner: 'Kholiq Sumadi', partnerborn: '1958', partnerdead: '-', child: '2' },
      { id: 21, rootanak: 6, fullname: 'Husnul Hidayati', nickname: '-', father: 'Mas`ud Sufyan', mother: 'Siti Khotijah', seq: 2, gender: 'Perempuan', born: '1961', dead: '-', partner: 'Thohari', partnerborn: '1955', partnerdead: '-', child: '4' },
      { id: 22, rootanak: 7, fullname: 'Siti Mu`awanah', nickname: 'Anah', father: 'M. Syahri', mother: 'Siti Syamsiyah', seq: 1, gender: 'Perempuan', born: '1973', dead: '-', partner: 'Humaidi', partnerborn: '1970', partnerdead: '-', child: '3' },
      { id: 23, rootanak: 7, fullname: 'Imron Fauzi', nickname: 'Imron', father: 'M. Syahri', mother: 'Siti Syamsiyah', seq: 2, gender: 'Laki-laki', born: '1978', dead: '-', partner: 'Mutikah', partnerborn: '1979', partnerdead: '-', child: '1' },
      { id: 24, rootanak: 7, fullname: 'Kholil Mansur Masrukin', nickname: 'Kholil', father: 'M. Syahri', mother: 'Siti Syamsiyah', seq: 3, gender: 'Laki-laki', born: '1983', dead: '-', partner: '-', partnerborn: '-', partnerdead: '-', child: '-' },
      { id: 25, rootanak: 8, fullname: 'Agus Basuki Rohmat', nickname: 'Agus', father: 'M. Bashoni', mother: 'Umi Maisaroh', seq: 1, gender: 'Laki-laki', born: '1975', dead: '-', partner: 'Wiwik Nugraini', partnerborn: '1983', partnerdead: '-', child: '1' },
      { id: 26, rootanak: 8, fullname: 'Bambang Khoiruddin Br', nickname: 'Bambang', father: 'M. Bashoni', mother: 'Umi Maisaroh', seq: 2, gender: 'Laki-laki', born: '1978', dead: '-', partner: 'Tutik Mardiana', partnerborn: '1983', partnerdead: '-', child: '-' },
      { id: 27, rootanak: 8, fullname: 'Imam Taroji Rohmatullah', nickname: '-', father: 'M. Bashoni', mother: 'Umi Maisaroh', seq: 3, gender: 'Laki-laki', born: '1980', dead: '-', partner: 'Nanik Rohana', partnerborn: '1980', partnerdead: '-', child: '1' },
      { id: 28, rootanak: 8, fullname: 'Sabit Akdamana', nickname: 'Sabit', father: 'M. Bashoni', mother: 'Umi Maisaroh', seq: 4, gender: 'Laki-laki', born: '1983', dead: '-', partner: '-', partnerborn: '-', partnerdead: '-', child: '-' },
      { id: 29, rootanak: 8, fullname: 'Yeyen Pardiyan Efendi', nickname: 'Yeyen', father: 'M. Bashoni', mother: 'Umi Maisaroh', seq: 5, gender: 'Laki-laki', born: '1986', dead: '-', partner: '-', partnerborn: '-', partnerdead: '-', child: '-' },
      { id: 30, rootanak: 8, fullname: 'David Taufiq Irijal', nickname: '-', father: 'M. Bashoni', mother: 'Umi Maisaroh', seq: 6, gender: 'Laki-laki', born: '1989', dead: '-', partner: '-', partnerborn: '-', partnerdead: '-', child: '-' },
    ];

    $(document).ready(function () {

      // Function to populate table
      function populateTable() {
        const $tableBody = $('#data-table-anak'); // Select table body

        $.each(anakData, function (index, anak) {
          // Create table row using jQuery
          const $row = $('<tr></tr>');

          // Append sequence number (seq)
          $row.append(`<td style="text-align: center">${anak.seq}</td>`);

          // Append fullname
          $row.append(`<td>${anak.fullname}</td>`);

          // Append nickname
          $row.append(`<td>${anak.partner}</td>`);

          // Append action buttons
          const $actionButtons = `
        <td style="text-align: center">
          <div class="row">
              <div class="col-12 mb-3">
                <button class="btn btn-sm btn-primary" onclick="openmodalanak(${anak.id})">
                  <i class="fa-solid fa-magnifying-glass"></i>
                </button>
              </div>
            </div>
            <div class="row">
              <div class="col-12">
                <button class="btn btn-sm btn-success" onclick="opentableputu(${anak.id},'${anak.fullname}','${anak.partner}')">
                  <i class="fa-solid fa-child"></i>
                </button>
              </div>
            </div>
        </td>
      `;
          $row.append($actionButtons);

          // Append the row to the table body
          $tableBody.append($row);
        });

      }

      // Call the function when the page loads
      populateTable();

    });


    // function to open modal
    function openmodalanak(id) {
      // Find the data from anakData array based on the id
      const anak = anakData.find(a => a.id === id);

      $('#judul-anak').html(anak.fullname);
      $('#fullname').html(anak.fullname);
      $('#nickname').html(anak.nickname);
      $('#father').html(anak.father);
      $('#mother').html(anak.mother);
      $('#seq').html(anak.seq);
      $('#gender').html(anak.gender);
      $('#born').html(anak.born);
      $('#dead').html(anak.dead);

      $('#partner').html(anak.partner);
      $('#partnerborn').html(anak.partnerborn);
      $('#partnerdead').html(anak.partnerdead);
      $('#child').html(anak.child);

      $("#modal-anak").modal("show");
    }

    // function to open table putu
    function opentableputu(id, anakname, partner) {
      const $tableBody = $('#data-table-putu'); // Select table body

      // Clear the table body before appending new data
      $tableBody.empty();

      // Find all data from putuData array based on the rootanak
      const putuList = putuData.filter(a => a.rootanak === id);

      $.each(putuList, function (index, putu) {
        // Create table row using jQuery
        const $row = $('<tr></tr>');

        // Append sequence number (seq)
        $row.append(`<td style="text-align: center">${putu.seq}</td>`);

        // Append fullname
        $row.append(`<td>${putu.fullname}</td>`);

        // Append partner's name
        $row.append(`<td>${putu.partner}</td>`);

        // Append action buttons
        const $actionButtons = `
      <td style="text-align: center">
        <div class="row">
          <div class="col-12 mb-3">
            <button class="btn btn-sm btn-primary" onclick="openmodalputu(${putu.id})">
              <i class="fa-solid fa-magnifying-glass"></i>
            </button>
          </div>
        </div>
        <div class="row">
          <div class="col-12">
            <button class="btn btn-sm btn-success" onclick="opentablebuyut(${putu.id},'${putu.fullname}','${putu.partner}')">
              <i class="fa-solid fa-child"></i>
            </button>
          </div>
        </div>
      </td>
    `;
        $row.append($actionButtons);

        // Append the row to the table body
        $tableBody.append($row);
      });

      // Update the title and other elements
      $('#value-judul-anak').html(anakname);
      $('#value-judul-pasangan-anak').html(partner);

      // Hide and show relevant sections
      $('#table-anak').hide();
      $('#table-judul-anak').show();
      $('#table-putu').show();
    }

    // function untuk kembali ke table anak
    function backtableanak() {
      $('#table-anak').show();
      $('#table-judul-anak').hide();
      $('#table-putu').hide();
    }
  </script>
</body>

</html>