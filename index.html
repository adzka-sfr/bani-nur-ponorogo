<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Bani Nur</title>

  <!-- Add favicon (icon in tab) -->
  <link rel="icon" href="children.png" type="image/png">

  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />

  <!-- Select2 CSS -->
  <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />

  <!-- DataTables CSS -->
  <link href="https://cdn.datatables.net/1.13.4/css/jquery.dataTables.min.css" rel="stylesheet" />

  <!-- FontAwesome -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet" />
</head>

<body>
  <div class="container mt-3">
    <div class="row">
      <div class="col-12 text-center">
        <h5>Keturunan dari<br />Mbah H. Nur & Mbah Genuk</h5>
      </div>
    </div>
    <hr />

    <!-- judul anak -->
    <div class="row">
      <div class="col-12" id="table-judul-anak" style="display: none;">
        <table class="table table-bordered">
          <thead style="text-align: center;">
            <th>Pasangan Anak</th>
            <th style="width: 1%;">Kembali</th>
          </thead>
          <tbody>
            <tr>
              <td>
                <span id="value-judul-anak"></span>
                &
                <span id="value-judul-pasangan-anak"></span>
              </td>
              <td style="text-align: center;">
                <button class="btn btn-danger btn-sm" onclick="backtableanak()"><i
                    class="fa-solid fa-circle-up"></i></button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>

    <!-- judul putu -->
    <div class="row">
      <div class="col-12" id="table-judul-putu" style="display: none;">
        <table class="table table-bordered">
          <thead style="text-align: center;">
            <th>Pasangan Putu</th>
            <th style="width: 1%;">Kembali</th>
          </thead>
          <tbody>
            <tr>
              <td>
                <span id="value-judul-putu"></span>
                &
                <span id="value-judul-pasangan-putu"></span>
              </td>
              <td style="text-align: center;">
                <button class="btn btn-danger btn-sm" onclick="backtableputu()"><i
                    class="fa-solid fa-circle-up"></i></button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>

    <!-- judul buyut -->
    <div class="row">
      <div class="col-12" id="table-judul-buyut" style="display: none;">
        <table class="table table-bordered">
          <thead style="text-align: center;">
            <th>Pasangan Buyut</th>
            <th style="width: 1%;">Kembali</th>
          </thead>
          <tbody>
            <tr>
              <td>
                <span id="value-judul-buyut"></span>
                &
                <span id="value-judul-pasangan-buyut"></span>
              </td>
              <td style="text-align: center;">
                <button class="btn btn-danger btn-sm" onclick="backtablebuyut()"><i
                    class="fa-solid fa-circle-up"></i></button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>

    <!-- judul canggah -->
    <div class="row">
      <div class="col-12" id="table-judul-canggah" style="display: none;">
        <table class="table table-bordered">
          <thead style="text-align: center;">
            <th>Pasangan Canggah</th>
            <th style="width: 1%;">Kembali</th>
          </thead>
          <tbody>
            <tr>
              <td>
                <span id="value-judul-canggah"></span>
                &
                <span id="value-judul-pasangan-canggah"></span>
              </td>
              <td style="text-align: center;">
                <button class="btn btn-danger btn-sm" onclick="backtablecanggah()"><i
                    class="fa-solid fa-circle-up"></i></button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>

    <!-- judul wareng -->
    <div class="row">
      <div class="col-12" id="table-judul-wareng" style="display: none;">
        <table class="table table-bordered">
          <thead style="text-align: center;">
            <th>Pasangan Wareng</th>
            <th style="width: 1%;">Kembali</th>
          </thead>
          <tbody>
            <tr>
              <td>
                <span id="value-judul-wareng"></span>
                &
                <span id="value-judul-pasangan-wareng"></span>
              </td>
              <td style="text-align: center;">
                <button class="btn btn-danger btn-sm" onclick="backtablewareng()"><i
                    class="fa-solid fa-circle-up"></i></button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>

    <!-- judul udhegudheg -->
    <div class="row">
      <div class="col-12" id="table-judul-udgehudheg" style="display: none;">
        <table class="table table-bordered">
          <thead style="text-align: center;">
            <th>Pasangan Udheg-udheg</th>
            <th style="width: 1%;">Kembali</th>
          </thead>
          <tbody>
            <tr>
              <td>
                <span id="value-judul-udgehudheg"></span>
                &
                <span id="value-judul-pasangan-udgehudheg"></span>
              </td>
              <td style="text-align: center;">
                <button class="btn btn-danger btn-sm" onclick="backtableudhegudheg()"><i
                    class="fa-solid fa-circle-up"></i></button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>

    <!-- data anak -->
    <div class="row">
      <div class="col-12" id="table-anak">
        <table class="table table-bordered">
          <thead style="text-align: center">
            <th>No</th>
            <th>Anak</th>
            <th>Pasangan</th>
            <th>Info</th>
          </thead>
          <tbody id="data-table-anak">
            <!-- Rows will be dynamically inserted here -->
          </tbody>
        </table>
      </div>
    </div>

    <!-- data putu -->
    <div class="row">
      <div class="col-12" id="table-putu" style="display: none;">
        <table class="table table-bordered">
          <thead style="text-align: center;">
            <th>No</th>
            <th>Nama</th>
            <th>Pasangan</th>
            <th>Info</th>
          </thead>
          <tbody id="data-table-putu">
          </tbody>
        </table>
      </div>
    </div>

    <!-- data buyut -->
    <div class="row">
      <div class="col-12" id="table-buyut" style="display: none;">
        <table class="table table-bordered">
          <thead style="text-align: center;">
            <th>No</th>
            <th>Nama</th>
            <th>Pasangan</th>
            <th>Info</th>
          </thead>
          <tbody id="data-table-buyut">
          </tbody>
        </table>
      </div>
    </div>

    <!-- data canggah -->
    <div class="row">
      <div class="col-12" id="table-canggah" style="display: none;">
        <table class="table table-bordered">
          <thead style="text-align: center;">
            <th>No</th>
            <th>Nama</th>
            <th>Pasangan</th>
            <th>Info</th>
          </thead>
          <tbody id="data-table-canggah">
          </tbody>
        </table>
      </div>
    </div>

    <!-- data wareng -->
    <div class="row">
      <div class="col-12" id="table-wareng" style="display: none;">
        <table class="table table-bordered">
          <thead style="text-align: center;">
            <th>No</th>
            <th>Nama</th>
            <th>Pasangan</th>
            <th>Info</th>
          </thead>
          <tbody id="data-table-wareng">
          </tbody>
        </table>
      </div>
    </div>

    <!-- data udhegudheg -->
    <div class="row">
      <div class="col-12" id="table-udhegudheg" style="display: none;">
        <table class="table table-bordered">
          <thead style="text-align: center;">
            <th>No</th>
            <th>Nama</th>
            <th>Pasangan</th>
            <th>Info</th>
          </thead>
          <tbody id="data-table-udhegudheg">
          </tbody>
        </table>
      </div>
    </div>

    <!-- data gantungsiwur -->
    <div class="row">
      <div class="col-12" id="table-gantungsiwur" style="display: none;">
        <table class="table table-bordered">
          <thead style="text-align: center;">
            <th>No</th>
            <th>Nama</th>
            <th>Pasangan</th>
            <th>Info</th>
          </thead>
          <tbody id="data-table-gantungsiwur">
          </tbody>
        </table>
      </div>
    </div>

    <!-- Modal -->
    <div class="modal fade" id="modal-detail-info" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
      <div class="modal-dialog ">
        <div class="modal-content">
          <div class="modal-header">
            <h1 class="modal-title fs-5">Info - <span id="judul-anak"></span></h1>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body">
            <div class="row">
              <div class="col-12">
                <table>
                  <tr>
                    <td>Nama Lengkap</td>
                    <td>:</td>
                    <th id="fullname"></th>
                  </tr>
                  <tr>
                    <td>Nama Panggilan</td>
                    <td>:</td>
                    <th id="nickname"></th>
                  </tr>
                  <tr>
                    <td>Bapak</td>
                    <td>:</td>
                    <th id="father"></th>
                  </tr>
                  <tr>
                    <td>Ibu</td>
                    <td>:</td>
                    <th id="mother"></th>
                  </tr>
                  <tr>
                    <td>Anak ke</td>
                    <td>:</td>
                    <th id="seq"></th>
                  </tr>
                  <tr>
                    <td>Jenis kelamin</td>
                    <td>:</td>
                    <th id="gender"></th>
                  </tr>
                  <tr>
                    <td>Tahun lahir</td>
                    <td>:</td>
                    <th id="born"></th>
                  </tr>
                  <tr>
                    <td>Tahun wafat</td>
                    <td>:</td>
                    <th id="dead"></th>
                  </tr>
                  <tr>
                    <td colspan="3" style="height: 30px;"> </td>
                  </tr>
                  <tr>
                    <td>Pasangan</td>
                    <td>:</td>
                    <th id="partner"></th>
                  </tr>
                  <tr>
                    <td>Tahun lahir</td>
                    <td>:</td>
                    <th id="partnerborn"></th>
                  </tr>
                  <tr>
                    <td>Tahun wafat</td>
                    <td>:</td>
                    <th id="partnerdead"></th>
                  </tr>
                  <tr id="place-child">
                    <td>Anak</td>
                    <td>:</td>
                    <td id="child"></td>
                  </tr>
                  <tr id="place-jumputu">
                    <td>Putu</td>
                    <td>:</td>
                    <td id="jumputu"></td>
                  </tr>
                  <tr>
                    <td id="place-jumbuyut">Buyut</td>
                    <td>:</td>
                    <td id="jumbuyut"></td>
                  </tr>
                  <tr id="place-jumcanggah">
                    <td>Canggah</td>
                    <td>:</td>
                    <td id="jumcanggah"></td>
                  </tr>
                  <tr id="place-jumwareng">
                    <td>Wareng</td>
                    <td>:</td>
                    <td id="jumwareng"></td>
                  </tr>
                  <tr id="place-jumudhegudheg">
                    <td>Udheg<sup>2</sup></td>
                    <td>:</td>
                    <td id="jumudhegudheg"></td>
                  </tr>
                  <tr id="place-jumgantungsiwur">
                    <td>Gantung Siwur</td>
                    <td>:</td>
                    <td id="jumgantungsiwur"></td>
                  </tr>
                </table>
              </div>
            </div>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
              Close
            </button>

          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- jQuery -->
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

  <!-- Select2 JS -->
  <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>

  <!-- DataTables JS -->
  <script src="https://cdn.datatables.net/1.13.4/js/jquery.dataTables.min.js"></script>

  <!-- SweetAlert2 JS -->
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

  <!-- FontAwesome (already loaded via the CSS link) -->

  <!-- Include the dataAnak.js file -->
  <script src="listdata.js"></script>

  <script>
    $(document).ready(function () {
      // Call the function when the page loads
      opentableanak();
    });

    // function to count age
    function calculateAge(bornYear, dieYear) {
      // If the born year is invalid, return "N/A"
      if (!bornYear || bornYear === '-' || isNaN(bornYear)) {
        return "-";
      }

      // Determine the year to calculate from (use die year if available, otherwise use the current year)
      const currentYear = new Date().getFullYear();
      const yearToCalculate = (dieYear && dieYear !== '-' && !isNaN(dieYear)) ? dieYear : currentYear;

      // Calculate age
      return yearToCalculate - bornYear;
    }

    // function to count descendants
    function countDescendants(array, rootValue) {
      // Filter the provided array based on the root value and count the result
      return array.filter(item => item.root === rootValue).length;
    }

    // Function to populate table anak
    function opentableanak() {
      const $tableBody = $('#data-table-anak'); // Select table body

      $.each(anakData, function (index, anak) {
        var descendants = 0;
        // Check if anakData has corresponding putu in putuData
        const hasDescendants = putuData.some(a => a.root === anak.id);
        if (hasDescendants) {
          descendants = 1;
        } else {
          descendants = 0;
        }

        // hitung umur anak
        var statusanak;
        const ageanak = calculateAge(anak.born, anak.dead);
        if (anak.dead == '-') {
          statusanak = '';
        } else {
          statusanak = ' - Alm';
        }

        // hitung umur pasangan
        var statuspartner;
        const agepartner = calculateAge(anak.partnerborn, anak.partnerdead);
        if (anak.dead == '-') {
          statuspartner = '';
        } else {
          statuspartner = ' - Alm';
        }

        // cek apakah ada pasangan
        if (anak.partner == '-') {
          statuspartner = '';
        } else {
          statuspartner = '<br>(' + agepartner + '<sub>thn</sub>' + statuspartner + ')';
        }

        // Create table row using jQuery
        const $row = $('<tr></tr>');

        // Append sequence number (seq)
        $row.append(`<td style="text-align: center">${anak.seq}</td>`);

        // Append fullname
        $row.append(`<td>${anak.fullname}<br>(${ageanak}<sub>thn</sub>${statusanak})</td>`);

        // Append nickname
        $row.append(`<td>${anak.partner}${statuspartner}</td>`);

        if (descendants == 1) {
          // Append action buttons
          const $actionButtons = `
                              <td style="text-align: center">
                                <div class="row">
                                    <div class="col-12 mb-3">
                                      <button class="btn btn-sm btn-primary" onclick="openmodalanak(${anak.id})">
                                        <i class="fa-solid fa-magnifying-glass"></i>
                                      </button>
                                    </div>
                                  </div>
                                  <div class="row">
                                    <div class="col-12">
                                      <button class="btn btn-sm btn-success" onclick="opentableputu(${anak.id},'${anak.fullname}','${anak.partner}')">
                                        <i class="fa-solid fa-child"></i>
                                      </button>
                                    </div>
                                  </div>
                              </td>
                            `;
          $row.append($actionButtons);
        } else {
          // Append action buttons
          const $actionButtons = `
                              <td style="text-align: center">
                                <div class="row">
                                    <div class="col-12 mb-3">
                                      <button class="btn btn-sm btn-primary" onclick="openmodalanak(${anak.id})">
                                        <i class="fa-solid fa-magnifying-glass"></i>
                                      </button>
                                    </div>
                                  </div>
                              </td>
                            `;
          $row.append($actionButtons);
        }

        // Append the row to the table body
        $tableBody.append($row);
      });

    }

    // function to open table putu
    function opentableputu(id, anakname, partner) {
      const $tableBody = $('#data-table-putu'); // Select table body

      // Clear the table body before appending new data
      $tableBody.empty();

      // Find all data from putuData array based on the root
      const putuList = putuData.filter(a => a.root === id);

      $.each(putuList, function (index, putu) {
        var descendants = 0;
        // Check if anakData has corresponding putu in putuData
        const hasDescendants = buyutData.some(a => a.root === putu.id);
        if (hasDescendants) {
          descendants = 1;
        } else {
          descendants = 0;
        }

        // hitung umur anak
        var statusanak;
        const ageanak = calculateAge(putu.born, putu.dead);
        if (putu.dead == '-') {
          statusanak = '';
        } else {
          statusanak = ' - Alm';
        }

        // hitung umur pasangan
        var statuspartner;
        const agepartner = calculateAge(putu.partnerborn, putu.partnerdead);
        if (putu.partnerdead == '-') {
          statuspartner = '';
        } else {
          statuspartner = ' - Alm';
        }

        // cek apakah ada pasangan
        if (putu.partner == '-') {
          statuspartner = '';
        } else {
          statuspartner = '<br>(' + agepartner + '<sub>thn</sub>' + statuspartner + ')';
        }

        // Create table row using jQuery
        const $row = $('<tr></tr>');

        // Append sequence number (seq)
        $row.append(`<td style="text-align: center">${putu.seq}</td>`);

        // Append fullname
        $row.append(`<td>${putu.fullname}<br>(${ageanak}<sub>thn</sub>${statusanak})</td>`);

        // Append partner's name
        $row.append(`<td>${putu.partner}${statuspartner}</td>`);

        if (descendants == 1) {
          // Append action buttons
          const $actionButtons = `
                              <td style="text-align: center">
                                <div class="row">
                                  <div class="col-12 mb-3">
                                    <button class="btn btn-sm btn-primary" onclick="openmodalputu(${putu.id})">
                                      <i class="fa-solid fa-magnifying-glass"></i>
                                    </button>
                                  </div>
                                </div>
                                <div class="row">
                                  <div class="col-12">
                                    <button class="btn btn-sm btn-success" onclick="opentablebuyut(${putu.id},'${putu.fullname}','${putu.partner}')">
                                      <i class="fa-solid fa-child"></i>
                                    </button>
                                  </div>
                                </div>
                              </td>
                            `;
          $row.append($actionButtons);
        } else {
          // Append action buttons
          const $actionButtons = `
                              <td style="text-align: center">
                                <div class="row">
                                  <div class="col-12 mb-3">
                                    <button class="btn btn-sm btn-primary" onclick="openmodalputu(${putu.id})">
                                      <i class="fa-solid fa-magnifying-glass"></i>
                                    </button>
                                  </div>
                                </div>
                              </td>
                            `;
          $row.append($actionButtons);
        }


        // Append the row to the table body
        $tableBody.append($row);
      });

      // Update the title and other elements
      $('#value-judul-anak').html(anakname);
      $('#value-judul-pasangan-anak').html(partner);

      // Hide and show relevant sections
      $('#table-anak').hide();
      $('#table-judul-anak').show();
      $('#table-putu').show();
    }

    // function to open table buyut
    function opentablebuyut(id, putuname, partner) {
      const $tableBody = $('#data-table-buyut'); // Select table body

      // Clear the table body before appending new data
      $tableBody.empty();

      // Find all data from buyutData array based on the root
      const buyutList = buyutData.filter(a => a.root === id);

      $.each(buyutList, function (index, buyut) {
        var descendants = 0;
        // Check if anakData has corresponding putu in putuData
        const hasDescendants = canggahData.some(a => a.root === buyut.id);
        if (hasDescendants) {
          descendants = 1;
        } else {
          descendants = 0;
        }

        // hitung umur anak
        var statusanak;
        const ageanak = calculateAge(buyut.born, buyut.dead);
        if (buyut.dead == '-') {
          statusanak = '';
        } else {
          statusanak = ' - Alm';
        }

        // hitung umur pasangan
        var statuspartner;
        const agepartner = calculateAge(buyut.partnerborn, buyut.partnerdead);
        if (buyut.partnerdead == '-') {
          statuspartner = '';
        } else {
          statuspartner = ' - Alm';
        }

        // cek apakah ada pasangan
        if (buyut.partner == '-') {
          statuspartner = '';
        } else {
          statuspartner = '<br>(' + agepartner + '<sub>thn</sub>' + statuspartner + ')';
        }

        // Create table row using jQuery
        const $row = $('<tr></tr>');

        // Append sequence number (seq)
        $row.append(`<td style="text-align: center">${buyut.seq}</td>`);

        // Append fullname
        $row.append(`<td>${buyut.fullname}<br>(${ageanak}<sub>thn</sub>${statusanak})</td>`);

        // Append partner's name
        $row.append(`<td>${buyut.partner}${statuspartner}</td>`);

        if (descendants == 1) {
          // Append action buttons
          const $actionButtons = `
                            <td style="text-align: center">
                              <div class="row">
                                <div class="col-12 mb-3">
                                  <button class="btn btn-sm btn-primary" onclick="openmodalbuyut(${buyut.id})">
                                    <i class="fa-solid fa-magnifying-glass"></i>
                                  </button>
                                </div>
                              </div>
                              <div class="row">
                                <div class="col-12">
                                  <button class="btn btn-sm btn-success" onclick="opentablecanggah(${buyut.id},'${buyut.fullname}','${buyut.partner}')">
                                    <i class="fa-solid fa-child"></i>
                                  </button>
                                </div>
                              </div>
                            </td>
                          `;
          $row.append($actionButtons);
        } else {
          // Append action buttons
          const $actionButtons = `
                            <td style="text-align: center">
                              <div class="row">
                                <div class="col-12 mb-3">
                                  <button class="btn btn-sm btn-primary" onclick="openmodalbuyut(${buyut.id})">
                                    <i class="fa-solid fa-magnifying-glass"></i>
                                  </button>
                                </div>
                              </div>
                            </td>
                          `;
          $row.append($actionButtons);
        }

        // Append the row to the table body
        $tableBody.append($row);
      });

      // Update the title and other elements
      $('#value-judul-putu').html(putuname);
      $('#value-judul-pasangan-putu').html(partner);

      // Hide and show relevant sections
      $('#table-anak').hide();
      $('#table-putu').hide();
      $('#table-judul-anak').show();
      $('#table-judul-putu').show();
      $('#table-buyut').show();
    }

    // function to open table canggah
    function opentablecanggah(id, buyutname, partner) {
      const $tableBody = $('#data-table-canggah'); // Select table body

      // Clear the table body before appending new data
      $tableBody.empty();

      // Find all data from buyutData array based on the root
      const canggahList = canggahData.filter(a => a.root === id);

      $.each(canggahList, function (index, canggah) {
        var descendants = 0;
        // Check if anakData has corresponding putu in putuData
        const hasDescendants = warengData.some(a => a.root === canggah.id);
        if (hasDescendants) {
          descendants = 1;
        } else {
          descendants = 0;
        }

        // hitung umur anak
        var statusanak;
        const ageanak = calculateAge(canggah.born, canggah.dead);
        if (canggah.dead == '-') {
          statusanak = '';
        } else {
          statusanak = ' - Alm';
        }

        // hitung umur pasangan
        var statuspartner;
        const agepartner = calculateAge(canggah.partnerborn, canggah.partnerdead);
        if (canggah.partnerdead == '-') {
          statuspartner = '';
        } else {
          statuspartner = ' - Alm';
        }

        // cek apakah ada pasangan
        if (canggah.partner == '-') {
          statuspartner = '';
        } else {
          statuspartner = '<br>(' + agepartner + '<sub>thn</sub>' + statuspartner + ')';
        }

        // Create table row using jQuery
        const $row = $('<tr></tr>');

        // Append sequence number (seq)
        $row.append(`<td style="text-align: center">${canggah.seq}</td>`);

        // Append fullname
        $row.append(`<td>${canggah.fullname}<br>(${ageanak}<sub>thn</sub>${statusanak})</td>`);

        // Append partner's name
        $row.append(`<td>${canggah.partner}${statuspartner}</td>`);

        if (descendants == 1) {
          // Append action buttons
          const $actionButtons = `
                            <td style="text-align: center">
                              <div class="row">
                                <div class="col-12 mb-3">
                                  <button class="btn btn-sm btn-primary" onclick="openmodalcanggah(${canggah.id})">
                                    <i class="fa-solid fa-magnifying-glass"></i>
                                  </button>
                                </div>
                              </div>
                              <div class="row">
                                <div class="col-12">
                                  <button class="btn btn-sm btn-success" onclick="opentablewareng(${canggah.id},'${canggah.fullname}','${canggah.partner}')">
                                    <i class="fa-solid fa-child"></i>
                                  </button>
                                </div>
                              </div>
                            </td>
                          `;
          $row.append($actionButtons);
        } else {
          // Append action buttons
          const $actionButtons = `
                            <td style="text-align: center">
                              <div class="row">
                                <div class="col-12 mb-3">
                                  <button class="btn btn-sm btn-primary" onclick="openmodalcanggah(${canggah.id})">
                                    <i class="fa-solid fa-magnifying-glass"></i>
                                  </button>
                                </div>
                              </div>
                            </td>
                          `;
          $row.append($actionButtons);
        }


        // Append the row to the table body
        $tableBody.append($row);
      });

      // Update the title and other elements
      $('#value-judul-buyut').html(buyutname);
      $('#value-judul-pasangan-buyut').html(partner);

      // Hide and show relevant sections
      $('#table-anak').hide();
      $('#table-putu').hide();
      $('#table-buyut').hide();
      $('#table-canggah').show();

      $('#table-judul-anak').show();
      $('#table-judul-putu').show();
      $('#table-judul-buyut').show();
    }

    // function to open table wareng
    function opentablewareng(id, canggahname, partner) {
      const $tableBody = $('#data-table-wareng'); // Select table body

      // Clear the table body before appending new data
      $tableBody.empty();

      // Find all data from buyutData array based on the root
      const warengList = warengData.filter(a => a.root === id);

      $.each(warengList, function (index, wareng) {
        var descendants = 0;
        // Check if anakData has corresponding putu in putuData
        const hasDescendants = udhegudhegData.some(a => a.root === wareng.id);
        if (hasDescendants) {
          descendants = 1;
        } else {
          descendants = 0;
        }

        // hitung umur anak
        var statusanak;
        const ageanak = calculateAge(wareng.born, wareng.dead);
        if (wareng.dead == '-') {
          statusanak = '';
        } else {
          statusanak = ' - Alm';
        }

        // hitung umur pasangan
        var statuspartner;
        const agepartner = calculateAge(wareng.partnerborn, wareng.partnerdead);
        if (wareng.partnerdead == '-') {
          statuspartner = '';
        } else {
          statuspartner = ' - Alm';
        }

        // cek apakah ada pasangan
        if (wareng.partner == '-') {
          statuspartner = '';
        } else {
          statuspartner = '<br>(' + agepartner + '<sub>thn</sub>' + statuspartner + ')';
        }

        // Create table row using jQuery
        const $row = $('<tr></tr>');

        // Append sequence number (seq)
        $row.append(`<td style="text-align: center">${wareng.seq}</td>`);

        // Append fullname
        $row.append(`<td>${wareng.fullname}<br>(${ageanak}<sub>thn</sub>${statusanak})</td>`);

        // Append partner's name
        $row.append(`<td>${wareng.partner}${statuspartner}</td>`);

        if (descendants == 1) {
          // Append action buttons
          const $actionButtons = `
                            <td style="text-align: center">
                              <div class="row">
                                <div class="col-12 mb-3">
                                  <button class="btn btn-sm btn-primary" onclick="openmodalwareng(${wareng.id})">
                                    <i class="fa-solid fa-magnifying-glass"></i>
                                  </button>
                                </div>
                              </div>
                              <div class="row">
                                <div class="col-12">
                                  <button class="btn btn-sm btn-success" onclick="opentableudhegudheg(${wareng.id},'${wareng.fullname}','${wareng.partner}')">
                                    <i class="fa-solid fa-child"></i>
                                  </button>
                                </div>
                              </div>
                            </td>
                          `;
          $row.append($actionButtons);
        } else {
          // Append action buttons
          const $actionButtons = `
                            <td style="text-align: center">
                              <div class="row">
                                <div class="col-12 mb-3">
                                  <button class="btn btn-sm btn-primary" onclick="openmodalwareng(${wareng.id})">
                                    <i class="fa-solid fa-magnifying-glass"></i>
                                  </button>
                                </div>
                              </div>
                            </td>
                          `;
          $row.append($actionButtons);
        }


        // Append the row to the table body
        $tableBody.append($row);
      });

      // Update the title and other elements
      $('#value-judul-canggah').html(canggahname);
      $('#value-judul-pasangan-canggah').html(partner);

      // Hide and show relevant sections
      $('#table-anak').hide();
      $('#table-putu').hide();
      $('#table-buyut').hide();
      $('#table-canggah').hide();
      $('#table-wareng').show();

      $('#table-judul-anak').show();
      $('#table-judul-putu').show();
      $('#table-judul-buyut').show();
      $('#table-judul-canggah').show();
    }

    // function to open table udhegudheg
    function opentableudhegudheg(id, warengname, partner) {
      const $tableBody = $('#data-table-udhegudheg'); // Select table body

      // Clear the table body before appending new data
      $tableBody.empty();

      // Find all data from buyutData array based on the root
      const udhegudhegList = udhegudhegData.filter(a => a.root === id);

      $.each(udhegudhegList, function (index, udhegudheg) {
        var descendants = 0;
        // Check if anakData has corresponding putu in putuData
        const hasDescendants = gantungsiwurData.some(a => a.root === udhegudheg.id);
        if (hasDescendants) {
          descendants = 1;
        } else {
          descendants = 0;
        }

        // hitung umur anak
        var statusanak;
        const ageanak = calculateAge(udhegudheg.born, udhegudheg.dead);
        if (udhegudheg.dead == '-') {
          statusanak = '';
        } else {
          statusanak = ' - Alm';
        }

        // hitung umur pasangan
        var statuspartner;
        const agepartner = calculateAge(udhegudheg.partnerborn, udhegudheg.partnerdead);
        if (udhegudheg.partnerdead == '-') {
          statuspartner = '';
        } else {
          statuspartner = ' - Alm';
        }

        // cek apakah ada pasangan
        if (udhegudheg.partner == '-') {
          statuspartner = '';
        } else {
          statuspartner = '<br>(' + agepartner + '<sub>thn</sub>' + statuspartner + ')';
        }

        // Create table row using jQuery
        const $row = $('<tr></tr>');

        // Append sequence number (seq)
        $row.append(`<td style="text-align: center">${udhegudheg.seq}</td>`);

        // Append fullname
        $row.append(`<td>${udhegudheg.fullname}<br>(${ageanak}<sub>thn</sub>${statusanak})</td>`);

        // Append partner's name
        $row.append(`<td>${udhegudheg.partner}${statuspartner}</td>`);

        if (descendants == 1) {
          // Append action buttons
          const $actionButtons = `
                            <td style="text-align: center">
                              <div class="row">
                                <div class="col-12 mb-3">
                                  <button class="btn btn-sm btn-primary" onclick="openmodaludhegudheg(${udhegudheg.id})">
                                    <i class="fa-solid fa-magnifying-glass"></i>
                                  </button>
                                </div>
                              </div>
                              <div class="row">
                                <div class="col-12">
                                  <button class="btn btn-sm btn-success" onclick="opentablegantungsiwur(${udhegudheg.id},'${udhegudheg.fullname}','${udhegudheg.partner}')">
                                    <i class="fa-solid fa-child"></i>
                                  </button>
                                </div>
                              </div>
                            </td>
                          `;
          $row.append($actionButtons);
        } else {
          // Append action buttons
          const $actionButtons = `
                            <td style="text-align: center">
                              <div class="row">
                                <div class="col-12 mb-3">
                                  <button class="btn btn-sm btn-primary" onclick="openmodaludhegudheg(${udhegudheg.id})">
                                    <i class="fa-solid fa-magnifying-glass"></i>
                                  </button>
                                </div>
                              </div>
                            </td>
                          `;
          $row.append($actionButtons);
        }


        // Append the row to the table body
        $tableBody.append($row);
      });

      // Update the title and other elements
      $('#value-judul-wareng').html(warengname);
      $('#value-judul-pasangan-wareng').html(partner);

      // Hide and show relevant sections
      $('#table-anak').hide();
      $('#table-putu').hide();
      $('#table-buyut').hide();
      $('#table-canggah').hide();
      $('#table-wareng').hide();
      $('#table-udhegudheg').show();

      $('#table-judul-anak').show();
      $('#table-judul-putu').show();
      $('#table-judul-buyut').show();
      $('#table-judul-canggah').show();
      $('#table-judul-wareng').show();
    }

    // function to open table gantungsiwur
    function opentablegantungsiwur(id, udhegudhegname, partner) {
      const $tableBody = $('#data-table-gantungsiwur'); // Select table body

      // Clear the table body before appending new data
      $tableBody.empty();

      // Find all data from buyutData array based on the root
      const gantungsiwurList = gantungsiwurData.filter(a => a.root === id);

      $.each(gantungsiwurList, function (index, gantungsiwur) {
        var descendants = 0;
        // Check if anakData has corresponding putu in putuData
        const hasDescendants = gropaksentheData.some(a => a.root === gantungsiwur.id);
        if (hasDescendants) {
          descendants = 1;
        } else {
          descendants = 0;
        }

        // hitung umur anak
        var statusanak;
        const ageanak = calculateAge(gantungsiwur.born, gantungsiwur.dead);
        if (gantungsiwur.dead == '-') {
          statusanak = '';
        } else {
          statusanak = ' - Alm';
        }

        // hitung umur pasangan
        var statuspartner;
        const agepartner = calculateAge(gantungsiwur.partnerborn, gantungsiwur.partnerdead);
        if (gantungsiwur.partnerdead == '-') {
          statuspartner = '';
        } else {
          statuspartner = ' - Alm';
        }

        // cek apakah ada pasangan
        if (gantungsiwur.partner == '-') {
          statuspartner = '';
        } else {
          statuspartner = '<br>(' + agepartner + '<sub>thn</sub>' + statuspartner + ')';
        }

        // Create table row using jQuery
        const $row = $('<tr></tr>');

        // Append sequence number (seq)
        $row.append(`<td style="text-align: center">${gantungsiwur.seq}</td>`);

        // Append fullname
        $row.append(`<td>${gantungsiwur.fullname}<br>(${ageanak}<sub>thn</sub>${statusanak})</td>`);

        // Append partner's name
        $row.append(`<td>${gantungsiwur.partner}${statuspartner}</td>`);

        if (descendants == 1) {
          // Append action buttons
          const $actionButtons = `
                            <td style="text-align: center">
                              <div class="row">
                                <div class="col-12 mb-3">
                                  <button class="btn btn-sm btn-primary" onclick="openmodalgantungsiwur(${gantungsiwur.id})">
                                    <i class="fa-solid fa-magnifying-glass"></i>
                                  </button>
                                </div>
                              </div>
                            </td>
                          `;
          $row.append($actionButtons);
        } else {
          // Append action buttons
          const $actionButtons = `
                            <td style="text-align: center">
                              <div class="row">
                                <div class="col-12 mb-3">
                                  <button class="btn btn-sm btn-primary" onclick="openmodalgantungsiwur(${gantungsiwur.id})">
                                    <i class="fa-solid fa-magnifying-glass"></i>
                                  </button>
                                </div>
                              </div>
                            </td>
                          `;
          $row.append($actionButtons);
        }


        // Append the row to the table body
        $tableBody.append($row);
      });

      // Update the title and other elements
      $('#value-judul-udhegudheg').html(udhegudhegname);
      $('#value-judul-pasangan-udhegudheg').html(partner);

      // Hide and show relevant sections
      $('#table-anak').hide();
      $('#table-putu').hide();
      $('#table-buyut').hide();
      $('#table-canggah').hide();
      $('#table-wareng').hide();
      $('#table-udhegudheg').hide();
      $('#table-gantungsiwur').show();

      $('#table-judul-anak').show();
      $('#table-judul-putu').show();
      $('#table-judul-buyut').show();
      $('#table-judul-canggah').show();
      $('#table-judul-wareng').show();
      $('#table-judul-udhegudheg').show();
    }

    // function to open modal
    function openmodalanak(id) {
      // Find the data from anakData array based on the id
      const anak = anakData.find(a => a.id === id);

      const jumanak = countDescendants(putuData, id);
      // ambil semua anak => putuData
      var jumputu = 0;
      var jumbuyut = 0;
      var jumcanggah = 0;
      var jumwareng = 0;
      var jumudhegudheg = 0;
      var jumgantungsiwur = 0;
      const putulist = putuData.filter(a => a.root === id);
      $.each(putulist, function (index, putu) {
        jumputu = jumputu + countDescendants(buyutData, putu.id);

        const buyutlist = buyutData.filter(a => a.root === putu.id);
        $.each(buyutlist, function (index, buyut) {
          jumbuyut = jumbuyut + countDescendants(canggahData, buyut.id);

          const canggahlist = canggahData.filter(a => a.root === buyut.id);
          $.each(canggahlist, function (index, canggah) {
            jumcanggah = jumcanggah + countDescendants(warengData, canggah.id);

            const warenglist = warengData.filter(a => a.root === canggah.id);
            $.each(warenglist, function (index, wareng) {
              jumwareng = jumwareng + countDescendants(udhegudhegData, wareng.id);

              const udhegudheglist = udhegudhegData.filter(a => a.root === wareng.id);
              $.each(udhegudheglist, function (index, udhegudheg) {
                jumudhegudheg = jumudhegudheg + countDescendants(gantungsiwurData, udhegudheg.id);

                const gantungsiwurlist = gantungsiwurData.filter(a => a.root === udhegudheg.id);
                $.each(gantungsiwurlist, function (index, gantungsiwur) {
                  jumgantungsiwur = jumgantungsiwur + countDescendants(gropaksentheData, gantungsiwur.id);
                })
              })
            })
          })
        })
      })

      $('#judul-anak').html(anak.fullname);
      $('#fullname').html(anak.fullname);
      $('#nickname').html(anak.nickname);
      $('#father').html(anak.father);
      $('#mother').html(anak.mother);
      $('#seq').html(anak.seq);
      $('#gender').html(anak.gender);
      $('#born').html(anak.born);
      $('#dead').html(anak.dead);

      $('#partner').html(anak.partner);
      $('#partnerborn').html(anak.partnerborn);
      $('#partnerdead').html(anak.partnerdead);
      $('#child').html(jumanak);
      $('#jumputu').html(jumputu);
      $('#jumbuyut').html(jumbuyut);
      $('#jumcanggah').html(jumcanggah);
      $('#jumwareng').html(jumwareng);
      $('#jumudhegudheg').html(jumudhegudheg);
      $('#jumgantungsiwur').html(jumgantungsiwur);

      $('#place-child').show();
      $('#place-jumputu').show();
      $('#place-jumbuyut').show();
      $('#place-jumcanggah').show();
      $('#place-jumwareng').show();
      $('#place-jumudhegudheg').show();
      $('#place-jumgantungsiwur').show();

      $("#modal-detail-info").modal("show");
    }

    // function to open modal
    function openmodalputu(id) {
      // Find the data from anakData array based on the id
      const anak = putuData.find(a => a.id === id);

      // cari mama dan papa nya
      var rootorangtua = anak.root;
      var mama, papa;
      const orangtua = anakData.find(b => b.id === rootorangtua);

      // cek untuk menentukan mana papa dan mama nya
      if (orangtua.gender == 'Perempuan') {
        mama = orangtua.fullname;
        papa = orangtua.partner;
      } else {
        mama = orangtua.partner;
        papa = orangtua.fullname;
      }

      const jumanak = countDescendants(buyutData, id);
      // ambil semua anak => buyutData
      var jumputu = 0;
      var jumbuyut = 0;
      var jumcanggah = 0;
      var jumwareng = 0;
      var jumudhegudheg = 0;
      var jumgantungsiwur = 0;
      const putulist = buyutData.filter(a => a.root === id);
      $.each(putulist, function (index, putu) {
        jumputu = jumputu + countDescendants(canggahData, putu.id);

        const buyutlist = canggahData.filter(a => a.root === putu.id);
        $.each(buyutlist, function (index, buyut) {
          jumbuyut = jumbuyut + countDescendants(warengData, buyut.id);

          const canggahlist = warengData.filter(a => a.root === buyut.id);
          $.each(canggahlist, function (index, canggah) {
            jumcanggah = jumcanggah + countDescendants(udhegudhegData, canggah.id);

            const warenglist = udhegudhegData.filter(a => a.root === canggah.id);
            $.each(warenglist, function (index, wareng) {
              jumwareng = jumwareng + countDescendants(gantungsiwurData, wareng.id);

              const udhegudheglist = gantungsiwurData.filter(a => a.root === wareng.id);
              $.each(udhegudheglist, function (index, udhegudheg) {
                jumudhegudheg = jumudhegudheg + countDescendants(gropaksentheData, udhegudheg.id);
              })
            })
          })
        })
      })

      $('#judul-anak').html(anak.fullname);
      $('#fullname').html(anak.fullname);
      $('#nickname').html(anak.nickname);
      $('#father').html(papa);
      $('#mother').html(mama);
      $('#seq').html(anak.seq);
      $('#gender').html(anak.gender);
      $('#born').html(anak.born);
      $('#dead').html(anak.dead);

      $('#partner').html(anak.partner);
      $('#partnerborn').html(anak.partnerborn);
      $('#partnerdead').html(anak.partnerdead);
      $('#child').html(jumanak);
      $('#jumputu').html(jumputu);
      $('#jumbuyut').html(jumbuyut);
      $('#jumcanggah').html(jumcanggah);
      $('#jumwareng').html(jumwareng);
      $('#jumudhegudheg').html(jumudhegudheg);

      $('#place-child').show();
      $('#place-jumputu').show();
      $('#place-jumbuyut').show();
      $('#place-jumcanggah').show();
      $('#place-jumwareng').show();
      $('#place-jumudhegudheg').show();
      $('#place-jumgantungsiwur').hide();

      $("#modal-detail-info").modal("show");
    }

    // function to open modal
    function openmodalbuyut(id) {
      // Find the data from anakData array based on the id
      const anak = buyutData.find(a => a.id === id);

      // cari mama dan papa nya
      var rootorangtua = anak.root;
      var mama, papa;
      const orangtua = putuData.find(b => b.id === rootorangtua);

      // cek untuk menentukan mana papa dan mama nya
      if (orangtua.gender == 'Perempuan') {
        mama = orangtua.fullname;
        papa = orangtua.partner;
      } else {
        mama = orangtua.partner;
        papa = orangtua.fullname;
      }

      const jumanak = countDescendants(canggahData, id);
      // ambil semua anak => canggahData
      var jumputu = 0;
      var jumbuyut = 0;
      var jumcanggah = 0;
      var jumwareng = 0;
      var jumudhegudheg = 0;
      var jumgantungsiwur = 0;
      const putulist = canggahData.filter(a => a.root === id);
      $.each(putulist, function (index, putu) {
        jumputu = jumputu + countDescendants(warengData, putu.id);

        const buyutlist = warengData.filter(a => a.root === putu.id);
        $.each(buyutlist, function (index, buyut) {
          jumbuyut = jumbuyut + countDescendants(udhegudhegData, buyut.id);

          const canggahlist = udhegudhegData.filter(a => a.root === buyut.id);
          $.each(canggahlist, function (index, canggah) {
            jumcanggah = jumcanggah + countDescendants(gantungsiwurData, canggah.id);

            const warenglist = gantungsiwurData.filter(a => a.root === canggah.id);
            $.each(warenglist, function (index, wareng) {
              jumwareng = jumwareng + countDescendants(gropaksentheData, wareng.id);
            })
          })
        })
      })

      $('#judul-anak').html(anak.fullname);
      $('#fullname').html(anak.fullname);
      $('#nickname').html(anak.nickname);
      $('#father').html(papa);
      $('#mother').html(mama);
      $('#seq').html(anak.seq);
      $('#gender').html(anak.gender);
      $('#born').html(anak.born);
      $('#dead').html(anak.dead);

      $('#partner').html(anak.partner);
      $('#partnerborn').html(anak.partnerborn);
      $('#partnerdead').html(anak.partnerdead);
      $('#child').html(jumanak);
      $('#jumputu').html(jumputu);
      $('#jumbuyut').html(jumbuyut);
      $('#jumcanggah').html(jumcanggah);
      $('#jumwareng').html(jumwareng);
      $('#jumudhegudheg').html(jumudhegudheg);

      $('#place-child').show();
      $('#place-jumputu').show();
      $('#place-jumbuyut').show();
      $('#place-jumcanggah').show();
      $('#place-jumwareng').show();
      $('#place-jumudhegudheg').hide();
      $('#place-jumgantungsiwur').hide();

      $("#modal-detail-info").modal("show");
    }

    // function to open modal
    function openmodalcanggah(id) {
      // Find the data from anakData array based on the id
      const anak = canggahData.find(a => a.id === id);

      // cari mama dan papa nya
      var rootorangtua = anak.root;
      var mama, papa;
      const orangtua = buyutData.find(b => b.id === rootorangtua);

      // cek untuk menentukan mana papa dan mama nya
      if (orangtua.gender == 'Perempuan') {
        mama = orangtua.fullname;
        papa = orangtua.partner;
      } else {
        mama = orangtua.partner;
        papa = orangtua.fullname;
      }

      const jumanak = countDescendants(warengData, id);
      // ambil semua anak => warengData
      var jumputu = 0;
      var jumbuyut = 0;
      var jumcanggah = 0;
      var jumwareng = 0;
      var jumudhegudheg = 0;
      var jumgantungsiwur = 0;
      const putulist = warengData.filter(a => a.root === id);
      $.each(putulist, function (index, putu) {
        jumputu = jumputu + countDescendants(udhegudhegData, putu.id);

        const buyutlist = udhegudhegData.filter(a => a.root === putu.id);
        $.each(buyutlist, function (index, buyut) {
          jumbuyut = jumbuyut + countDescendants(gantungsiwurData, buyut.id);

          const canggahlist = gantungsiwurData.filter(a => a.root === buyut.id);
          $.each(canggahlist, function (index, canggah) {
            jumcanggah = jumcanggah + countDescendants(gropaksentheData, canggah.id);
          })
        })
      })

      $('#judul-anak').html(anak.fullname);
      $('#fullname').html(anak.fullname);
      $('#nickname').html(anak.nickname);
      $('#father').html(papa);
      $('#mother').html(mama);
      $('#seq').html(anak.seq);
      $('#gender').html(anak.gender);
      $('#born').html(anak.born);
      $('#dead').html(anak.dead);

      $('#partner').html(anak.partner);
      $('#partnerborn').html(anak.partnerborn);
      $('#partnerdead').html(anak.partnerdead);
      $('#child').html(jumanak);
      $('#jumputu').html(jumputu);
      $('#jumbuyut').html(jumbuyut);
      $('#jumcanggah').html(jumcanggah);
      $('#jumwareng').html(jumwareng);
      $('#jumudhegudheg').html(jumudhegudheg);

      $('#place-child').show();
      $('#place-jumputu').show();
      $('#place-jumbuyut').show();
      $('#place-jumcanggah').show();
      $('#place-jumwareng').hide();
      $('#place-jumudhegudheg').hide();
      $('#place-jumgantungsiwur').hide();

      $("#modal-detail-info").modal("show");
    }

    // function to open modal
    function openmodalwareng(id) {
      // Find the data from anakData array based on the id
      const anak = warengData.find(a => a.id === id);

      // cari mama dan papa nya
      var rootorangtua = anak.root;
      var mama, papa;
      const orangtua = canggahData.find(b => b.id === rootorangtua);

      // cek untuk menentukan mana papa dan mama nya
      if (orangtua.gender == 'Perempuan') {
        mama = orangtua.fullname;
        papa = orangtua.partner;
      } else {
        mama = orangtua.partner;
        papa = orangtua.fullname;
      }

      const jumanak = countDescendants(udhegudhegData, id);
      // ambil semua anak => udhegudhegData
      var jumputu = 0;
      var jumbuyut = 0;
      var jumcanggah = 0;
      var jumwareng = 0;
      var jumudhegudheg = 0;
      var jumgantungsiwur = 0;
      const putulist = udhegudhegData.filter(a => a.root === id);
      $.each(putulist, function (index, putu) {
        jumputu = jumputu + countDescendants(gantungsiwurData, putu.id);

        const buyutlist = gantungsiwurData.filter(a => a.root === putu.id);
        $.each(buyutlist, function (index, buyut) {
          jumbuyut = jumbuyut + countDescendants(gropaksentheData, buyut.id);
        })
      })

      $('#judul-anak').html(anak.fullname);
      $('#fullname').html(anak.fullname);
      $('#nickname').html(anak.nickname);
      $('#father').html(papa);
      $('#mother').html(mama);
      $('#seq').html(anak.seq);
      $('#gender').html(anak.gender);
      $('#born').html(anak.born);
      $('#dead').html(anak.dead);

      $('#partner').html(anak.partner);
      $('#partnerborn').html(anak.partnerborn);
      $('#partnerdead').html(anak.partnerdead);
      $('#child').html(jumanak);
      $('#jumputu').html(jumputu);
      $('#jumbuyut').html(jumbuyut);
      $('#jumcanggah').html(jumcanggah);
      $('#jumwareng').html(jumwareng);
      $('#jumudhegudheg').html(jumudhegudheg);

      $('#place-child').show();
      $('#place-jumputu').show();
      $('#place-jumbuyut').show();
      $('#place-jumcanggah').hide();
      $('#place-jumwareng').hide();
      $('#place-jumudhegudheg').hide();
      $('#place-jumgantungsiwur').hide();

      $("#modal-detail-info").modal("show");
    }

    // function to open modal
    function openmodaludhegudheg(id) {
      // Find the data from anakData array based on the id
      const anak = udhegudhegData.find(a => a.id === id);

      // cari mama dan papa nya
      var rootorangtua = anak.root;
      var mama, papa;
      const orangtua = warengData.find(b => b.id === rootorangtua);

      // cek untuk menentukan mana papa dan mama nya
      if (orangtua.gender == 'Perempuan') {
        mama = orangtua.fullname;
        papa = orangtua.partner;
      } else {
        mama = orangtua.partner;
        papa = orangtua.fullname;
      }

      const jumanak = countDescendants(gantungsiwurData, id);
      // ambil semua anak => gantungsiwurData
      var jumputu = 0;
      var jumbuyut = 0;
      var jumcanggah = 0;
      var jumwareng = 0;
      var jumudhegudheg = 0;
      var jumgantungsiwur = 0;
      const putulist = gantungsiwurData.filter(a => a.root === id);
      $.each(putulist, function (index, putu) {
        jumputu = jumputu + countDescendants(gropaksentheData, putu.id);
      })

      $('#judul-anak').html(anak.fullname);
      $('#fullname').html(anak.fullname);
      $('#nickname').html(anak.nickname);
      $('#father').html(papa);
      $('#mother').html(mama);
      $('#seq').html(anak.seq);
      $('#gender').html(anak.gender);
      $('#born').html(anak.born);
      $('#dead').html(anak.dead);

      $('#partner').html(anak.partner);
      $('#partnerborn').html(anak.partnerborn);
      $('#partnerdead').html(anak.partnerdead);
      $('#child').html(jumanak);
      $('#jumputu').html(jumputu);
      $('#jumbuyut').html(jumbuyut);
      $('#jumcanggah').html(jumcanggah);
      $('#jumwareng').html(jumwareng);
      $('#jumudhegudheg').html(jumudhegudheg);

      $('#place-child').show();
      $('#place-jumputu').show();
      $('#place-jumbuyut').hide();
      $('#place-jumcanggah').hide();
      $('#place-jumwareng').hide();
      $('#place-jumudhegudheg').hide();
      $('#place-jumgantungsiwur').hide();

      $("#modal-detail-info").modal("show");
    }

    // function to open modal
    function openmodalgantungsiwur(id) {
      // Find the data from anakData array based on the id
      const anak = gantungsiwurData.find(a => a.id === id);

      // cari mama dan papa nya
      var rootorangtua = anak.root;
      var mama, papa;
      const orangtua = udhegudhegData.find(b => b.id === rootorangtua);

      // cek untuk menentukan mana papa dan mama nya
      if (orangtua.gender == 'Perempuan') {
        mama = orangtua.fullname;
        papa = orangtua.partner;
      } else {
        mama = orangtua.partner;
        papa = orangtua.fullname;
      }

      const jumanak = countDescendants(gropaksentheData, id);
      // ambil semua anak => gantungsiwurData
      var jumputu = 0;
      var jumbuyut = 0;
      var jumcanggah = 0;
      var jumwareng = 0;
      var jumudhegudheg = 0;
      var jumgantungsiwur = 0;
      

      $('#judul-anak').html(anak.fullname);
      $('#fullname').html(anak.fullname);
      $('#nickname').html(anak.nickname);
      $('#father').html(papa);
      $('#mother').html(mama);
      $('#seq').html(anak.seq);
      $('#gender').html(anak.gender);
      $('#born').html(anak.born);
      $('#dead').html(anak.dead);

      $('#partner').html(anak.partner);
      $('#partnerborn').html(anak.partnerborn);
      $('#partnerdead').html(anak.partnerdead);
      $('#child').html(jumanak);
      $('#jumputu').html(jumputu);
      $('#jumbuyut').html(jumbuyut);
      $('#jumcanggah').html(jumcanggah);
      $('#jumwareng').html(jumwareng);
      $('#jumudhegudheg').html(jumudhegudheg);

      $('#place-child').show();
      $('#place-jumputu').hide();
      $('#place-jumbuyut').hide();
      $('#place-jumcanggah').hide();
      $('#place-jumwareng').hide();
      $('#place-jumudhegudheg').hide();
      $('#place-jumgantungsiwur').hide();

      $("#modal-detail-info").modal("show");
    }

    // function untuk kembali ke table anak
    function backtableanak() {
      $('#table-anak').show();
      $('#table-putu').hide();
      $('#table-buyut').hide();
      $('#table-canggah').hide();
      $('#table-wareng').hide();
      $('#table-udhegudheg').hide();
      $('#table-gantungsiwur').hide();

      $('#table-judul-anak').hide();
      $('#table-judul-putu').hide();
      $('#table-judul-buyut').hide();
      $('#table-judul-canggah').hide();
      $('#table-judul-wareng').hide();
      $('#table-judul-udhegudheg').hide();
      $('#table-judul-gantungsiwur').hide();
    }

    // function untuk kembali ke table anak
    function backtableputu() {
      $('#table-putu').show();
      $('#table-buyut').hide();
      $('#table-canggah').hide();
      $('#table-wareng').hide();
      $('#table-udhegudheg').hide();
      $('#table-gantungsiwur').hide();

      $('#table-judul-putu').hide();
      $('#table-judul-buyut').hide();
      $('#table-judul-canggah').hide();
      $('#table-judul-wareng').hide();
      $('#table-judul-udhegudheg').hide();
      $('#table-judul-gantungsiwur').hide();
    }

    // function untuk kembali ke table anak
    function backtablebuyut() {
      $('#table-buyut').show();
      $('#table-canggah').hide();
      $('#table-wareng').hide();
      $('#table-udhegudheg').hide();
      $('#table-gantungsiwur').hide();

      $('#table-judul-buyut').hide();
      $('#table-judul-canggah').hide();
      $('#table-judul-wareng').hide();
      $('#table-judul-udhegudheg').hide();
      $('#table-judul-gantungsiwur').hide();
    }

    // function untuk kembali ke table anak
    function backtablecanggah() {
      $('#table-canggah').show();
      $('#table-wareng').hide();
      $('#table-udhegudheg').hide();
      $('#table-gantungsiwur').hide();

      $('#table-judul-canggah').hide();
      $('#table-judul-wareng').hide();
      $('#table-judul-udhegudheg').hide();
      $('#table-judul-gantungsiwur').hide();
    }

    // function untuk kembali ke table anak
    function backtablewareng() {
      $('#table-wareng').show();
      $('#table-udhegudheg').hide();
      $('#table-gantungsiwur').hide();

      $('#table-judul-wareng').hide();
      $('#table-judul-udhegudheg').hide();
      $('#table-judul-gantungsiwur').hide();
    }

    // function untuk kembali ke table anak
    function backtableudhegudheg() {
      $('#table-udhegudheg').show();
      $('#table-gantungsiwur').hide();

      $('#table-judul-udhegudheg').hide();
      $('#table-judul-gantungsiwur').hide();
    }

    // function untuk kembali ke table anak
    function backtablegantungsiwur() {
      $('#table-gantungsiwur').show();

      $('#table-judul-gantungsiwur').hide();
    }

  </script>
</body>

</html>